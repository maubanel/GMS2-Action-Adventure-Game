<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<!-- EDIT THIS-->
		<title>Tutorial - GameMaker Action Adventure Game - Ch5 - Page 3</title>
		<!-- DO NOT EDIT THIS-->
		<meta http-equiv="X-UA-Compatible" content="IE=9" />
		<link rel="stylesheet" href="../style.css" type="text/css" media="screen" title="style" charset="UTF-8"/>
		<script type="text/javascript">
			var changePage = function(){
				var newPage = document.getElementById("page-select");
				window.location.replace(newPage.value);
				}
		</script>

	</head>

<!-- EDIT THIS - This section is where you can add an index to your tutorial -->
<body>
<!-- EDIT THIS - Your Tutorial title -->
	<h2 style="border-radius:0.5em 0.5em 0 0; margin:0;">Tutorial - Action Adventure Game</h2>
<!-- EDIT THIS - Here you list the pages in your tutorial, with the current one at the top -->
		<div class="head">
			<select id="page-select" onChange="changePage()">
				<optgroup label="Chapter 5 - Collectibles">
					<option value="page03.html">Draw HUD Backgroun d</option>
				</optgroup>
				<optgroup label="Chapter 6 - Pathfinding">
					<option value="../ch6/page01.html">Pathfinding Zombie Setup</option>
					<option value="../ch6/page02.html">Pathfinding</option>
					<option value="../ch6/page03.html">Zombie Chase State</option>
					<option value="../ch6/page04.html">Zombie Chase Player</option>
					<option value="../ch6/page05.html">Returning to Patrol</option>
				</optgroup>
				<optgroup label="Chapter 7 - Front End">
					<option value="../ch7/page01.html">Front End</option>
				</optgroup>
				<optgroup label="Chapter 8 - Audio">
					<option value="../ch8/page01.html">Audio - SFX</option>
					<option value="../ch8/page02.html">Audio - Music</option>
				</optgroup>
				<optgroup label="---Previous Pages">
					<optgroup label="Chapter 1 - Overview">
					<option value="../page01.html"><b>Top Down Adventure Game</b></option>
				</optgroup>
				<optgroup label="Chapter 2 - Player Collision">
					<option value="../ch2/page01.html">Importing Player Object</option>
					<option value="../ch2/page02.html">Creating Collision Volumes in Room</option>
					<option value="../ch2/page03.html">Finding Distance For Collision From Origin</option>
					<option value="../ch2/page04.html">Player Collision with Tileset</option>
					</optgroup>
					<optgroup label="Chapter 3 - Teleporter">
					<option value="../cn3/page01.html">Add Teleporter</option>
					<option value="../ch3/page02.html">Create Sand Room</option>
					<option value="../ch3/page03.html">Refactor Obj Player Step</option>
					<option value="../ch3/page04.html">Leaving Room Castle</option>
					<option value="../ch3/page05.html">Entering Room Desert</option>
					<option value="../ch3/page06.html">Going Back to Room Castle</option>
					</optgroup>
					<optgroup label="Chapter 4 - Dialogue">
					<option value="../ch4/page01.html">Dialogue Boxes - Basic Message</option>
					<option value="../ch4/page02.html">Dialogue Boxes - Array Message</option>
					<option value="../ch4/page03.html">Chaining Dialogue Boxes Together</option>
					<option value="../ch4/page04.html">Dialogue Boxes - Question</option>
					<option value="../ch4/page05.html">Dialogue Boxes - User Input</option>
					</optgroup>
					<optgroup label="Chapter 5 - Collectibles">
					<option value="page01.html">Collectibles - Setup Objects</option>
					<option value="page02.html">Collectibles - Collect Gem</option>
					</optgroup>
				</optgroup>
			</select>
		</div>
	
<!-- EDIT THIS - Main tutorial body goes here -->
<div class="body-scroll">
	<p>
	If you want to see tutorial in a separate web browswer window <a href="gms2tutorials:///openBrowser">click here</a>.
	
	<p style="color:rgb(85, 109, 130)">
	<b>Draw HUD Background</b>
	<p>
		Now we are going to draw a small version of the gem on the Heads Up Display (HUD) on the top of the screen. We will use our <tt><b>obj_game_controller</b></tt> for this and add a <tt><b>DrawGUI</b></tt> event type. First lets draw a transparent rectangle to higlight the HUD. Please add:

		<h3><tt><b>obj_game_controller: Draw GUI Event</b></tt></h3>

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/DrawSolidHUD.png" alt="Illustration of computer science variable as a box">
		
	<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Look at the HUD.  It is a bit ugly and you can't see what is happening behind it:

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/SolidBlueHUD.png" alt="Illustration of computer science variable as a box">

	<p>
		I don&rsquo;t like fact that the blue obscures the game screen. Lets make it transluscent. 
		
	<p>
		Lets look at the manual for <b><a href="gms2tutorials:///ShowHelp?keyword=draw_set_alpha">draw_set_alpha(real)</a></b>. Now the tricky thing is that if you don't reset the alpha back to 1 it will affect every other sprite that it gets to after it draws the hud. This might include game objects in the room.  The draw event carries over to all future draw events that come after it. 
		
	<p>
		So be careful, if you reduce the alpha always set it back to 100% which is for this built in variable <tt><b>1</b></tt>. This is only true for Gamemaker Draw events. 

	<h3><tt><b>obj_game_controller: Draw GUI Event</b></tt></h3>
	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/MakeHUDTransparent.png" alt="Illustration of computer science variable as a box">

	<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Look at the HUD.  It is a bit ugly and you can't see what is happening behind it:

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/TransparentHUD.png" alt="Illustration of computer science variable as a box">

	<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Now go between levels by entering the teleporter to see what happens. Notice the HUD appears only in <tt><b>rm_castle</b></tt> and then disappears. 

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/TransparentHUD.gif" alt="Illustration of computer science variable as a box">

	<p>
		We need the controller to persist just like the player so it carries to all levels. Open ObjGameController and click on the persistent radio button:

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/MakeGameControllerPersistent.png" alt="Illustration of computer science variable as a box">

	<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Now test the game again and voila, the HUD stays active on all rooms no matter how many times you go back and forth. 

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/HUDStaysBetweenLevels.gif" alt="Illustration of computer science variable as a box">

	<p>
		Now back to drawing the HUD again. Lets make a Font for the HUD. Create a new Font and pick one you like with a size of 10 points, set it to a thicker type and call it <tt><b>fnt_hud</b></tt>:
		
	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/PIckBoldFont10pt.png" alt="Illustration of computer science variable as a box">
	
	<p>
		Lets draw the title <tt><b>"Gems: "</b></tt> on the HUD. Open DrawGUI Event in <tt><b>obj_game_controller</b></tt> and add to the end of the script:

	<h3><tt><b>obj_game_controller: Draw GUI Event</b></tt></h3>
	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/DrawWhiteTextGemTitle.png" alt="Illustration of computer science variable as a box">
	
		<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Now the HUD has a text title on it.

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/GemTitleOnHUD.png" alt="Illustration of computer science variable as a box">

	<p>
		Now lets add the actual icon of the gem that we want to show on the screen how many you have collected. Add to the end of the Draw GUI event on the game controller:
		<h3><tt><b>obj_game_controller: Draw GUI Event</b></tt></h3>
	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/DrawGemRepeateed.png" alt="Illustration of computer science variable as a box">

	<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Run around collect Gems. Do you see gems adding up in the menu?  Also go from room to room.  Do you see a problem arise?

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/CollectGemHUDNotPersistent.gif" alt="Illustration of computer science variable as a box">

	<p>
		Each time you return to the room the gems reappear, their status is not saved. The rooms are set back to their original settings. What we need to do is make the rooms persistent. Go to the game and open <tt><b>rm_castle</b></tt> and <tt><b>rm_desert</b></tt> and click the radio button called <tt><b>Persistent</b></tt>. 
		<h3><tt><b>rm_castle</b></tt></h3>
		<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/RmCastlePersistent.png" alt="Illustration of computer science variable as a box">

		<h3><tt><b>rm_desert</b></tt></h3>
		<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/RmDesertPersistent.png" alt="Illustration of computer science variable as a box">

	<p>
		Run the game by pressing the <img style="vertical-align:middle" src="http://marcaubanel.com/gamemaker/GMS2-Images/Shared/Icon_RunProject.png" alt="play button icon"> <tt><b>Play Button</b></tt>. Test the game and the rooms should now remember the gems taken and not respawn them.

	<p>
		<img class="center" src="http://marcaubanel.com/gamemaker/GMS2-Images/Action-Adventure-Game/CH5/PersistentRoomsHUD.gif" alt="Illustration of computer science variable as a box">

		
		


		PersistentRoomsHUD.gif
</div>

<div class="footer">
	<div class="buttons">
		<div class="clear">
			<div style="float:left"> <!-- Button commented out as we are on the index and can't go back -->
				<a href="page02.html"  class="prev">
				<div id="button-prev"></div> 
				</a>
			</div>
			<div style="float:right"> <!-- Set the next page to go to here -->
				<a href="../ch6/page01.html" class="next">
					<div id="button-next"></div>
				</a>
			</div>
		</div>	
	</div>
<!-- Footer copyright notice - set this to your own or whatever is required (remove the text but leave the <h5> tags to just have the bar) -->
<h5>&copy; Copyright Mauby Games 2018</h5>
</div>

</body>
</html>



